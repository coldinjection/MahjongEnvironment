<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Mahjong UI</title>
    <style>
        table {
            width: 100%;
        }
        td {
            border: 1px solid black;
        }
        textarea {
            width: 98%;
        }
    </style>
</head>
<body>
    <p>test</p>
    <table><tr>
        <td><div id="p1">
            <button id="p1login" onclick="login(1, event)">P1 LOGIN</button>
            <button id="p1join" onclick="ws1.send('JUSTJOIN')">P1 JOIN</button>
            <br>
            <textarea rows="40" spellcheck="false"></textarea>
        </td></div>
        <td><div id="p2">
            <button id="p2login" onclick="login(2, event)">P2 LOGIN</button>
            <button id="p2join" onclick="ws2.send('JUSTJOIN')">P2 JOIN</button>
            <br>
            <textarea rows="40" spellcheck="false"></textarea>
        </td></div>
        <td><div id="p3">
            <button id="p3login" onclick="login(3, event)">P3 LOGIN</button>
            <button id="p3join" onclick="ws3.send('JUSTJOIN')">P3 JOIN</button>
            <br>
            <textarea rows="40" spellcheck="false"></textarea>
        </td></div>
        <td><div id="p4">
            <button id="p4login" onclick="login(4, event)">P4 LOGIN</button>
            <button id="p4join" onclick="ws4.send('JUSTJOIN')">P4 JOIN</button>
            <br>
            <textarea rows="40" spellcheck="false"></textarea>
        </td></div>
    </tr></table>

<script>
    // console.log("nothing so far")
    var ws1, ws2, ws3, ws4
    function login(p, evt) {
        var ws = new WebSocket("ws://127.0.0.1:8080");
        ws.onmessage = function (e) {
            evt.target.parentElement.lastElementChild.innerHTML = e.data + "\n- - - - - -\n" + evt.target.parentElement.lastElementChild.innerHTML
        };
        if (p == 1){
            ws1 = ws;
            setTimeout(() => { ws1.send("PNAME!tt1"); }, 4000)
        } else if (p == 2) {
            ws2 = ws;
            setTimeout(() => { ws2.send("PNAME!tt2"); }, 4000)
        } else if (p == 3) {
            ws3 = ws;
            setTimeout(() => { ws3.send("PNAME!tt3"); }, 4000)
        } else if (p == 4) {
            ws4 = ws;
            setTimeout(() => { ws4.send("PNAME!tt4"); }, 4000)
        }
    }
</script>
</body>
</html>
